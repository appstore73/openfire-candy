<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
    <title>Candy Plugin Readme</title>
    <style type="text/css">
        BODY {
            font-size: 100%;
        }

        BODY, TD, TH {
            font-family: tahoma, verdana, arial, helvetica, sans-serif;
            font-size: 0.8em;
        }

        H2 {
            font-size: 10pt;
            font-weight: bold;
        }

        A:hover {
            text-decoration: none;
        }

        H1 {
            font-family: tahoma, arial, helvetica, sans-serif;
            font-size: 1.4em;
            font-weight: bold;
            border-bottom: 1px #ccc solid;
            padding-bottom: 2px;
        }

        TT {
            font-family: courier new;
            font-weight: bold;
            color: #060;
        }

        PRE {
            font-family: courier new;
            font-size: 100%;
        }

        .events TH {
            font-size: 8pt;
            font-family: verdana;
            font-weight: bold;
            text-align: left;
            background-color: #eee;
            border-bottom: 1px #ccc solid;
        }

        .events .event {
            font-weight: bold;
        }

        .events .description {
            font-size: 8pt;
            font-family: verdana;
        }

        .events TD {
            border-bottom: 1px #ccc dotted;
            vertical-align: top;
        }
    </style>
</head>

<body>

<h1>
    Candy Plugin Readme
</h1>

<h2>Prerequesites</h2>

<p>

</p>

<h2>Installation</h2>

<ol>
    <li>Stop Openfire.</li>
    <li>Copy the clientcontrol.jar file to the OPENFIRE_HOME/plugins directory.</li>
    <li>Copy the sip.jar file to the OPENFIRE_HOME/plugins directory.</li>
    <li>Copy the candy.war file to the OPENFIRE_HOME/plugins directory.</li>
    <li>Restart Openfire.</li>
    <li>From a browser, go to http://your_openfire-server:7070/candy/candy/plugins/voicebridge/setup.html and give Flash permissions to use your mic. Select the remember checkbox.</li>
    <li>From a browser, go to http://your_openfire-server:7070/candy</li>
    <li>If this page does not appear, please check you log files and post any errors on www.igniterealtime.org</li>
</ol>

<h2>Configuration</h2>

<h3>Normal</h3>
<ul>
<li>Follow steps from https://github.com/candy-chat/candy/wiki/Installing-a-Jabber-server</li>
</ul>

<h3>Advanced</h3>
<ul>
<li>To setup a PSTN/PBX gateway for external VOIP telephone calls, use the SIP plugin to setup the SIP account and add the follwing two properties to Openfire. Use the standard admin user or any other admin account..
<p/>
<table border=1>
<tr><th>Property</th><th>Default Value</th><th>Description</th></tr>
<tr><td><b>voicebridge.default.proxy.name</b></td><td>&lt;required&gt;</td><td>A unique name for Voice bridge external PSTN Gateway</td></tr>
<tr><td><b>voicebridge.default.proxy.username</b></td><td>&lt;required&gt;</td><td>XMPP username used to create the SIP registration by SIP plugin</td></tr>
</table>
<p/>
</li>
<li>Change the http-bind ports from 7070/7443 to your choice like 80/443</li>
<li>Create or modify any of the folowing system properties
<p/>
<table border=1>
<tr><th>Property</th><th>Default Value</th><th>Description</th></tr>
<tr><td><b>candy.webapp.connection</b></td><td>bosh</td><td>Type of xmpp web connection. Use bosh or websockets. Note that you need Openfire 3.7.2 for websockets</td></tr>
<tr><td><b>candy.webapp.name</b></td><td>candy</td><td>Web application root name</td></tr>

<tr><td><b>voicebridge.rtmp.port</b></td><td>1935</td><td>Listening TCP port for RTMP Server</td></tr>
<tr><td><b>voicebridge.sip.port</b></td><td>5060</td><td>Listening UDP port for SIP Server</td></tr>
<tr><td><b>voicebridge.default.private.host</b></td><td>localhost</td><td>SIP Server internal network host name or ip address</td></tr>
<tr><td><b>voicebridge.default.public.host</b></td><td>localhost</td><td>SIP Server external network host name or ip address</td></tr>
<tr><td><b>voicebridge.default.conf.exten</b></td><td>&lt;required&gt;</td><td>Telephone extension for accessing conference bridge from external PSTN gateway</td></tr>
<tr><td><b>voicebridge.rtp.start.port</b></td><td>3200</td><td>RTP Port range start</td></tr>
<tr><td><b>voicebridge.rtp.end.port</b></td><td>3299</td><td>RTP Port range start</td></tr>
<tr><td><b>voicebridge.server.log.level</b></td><td>1</td><td>Logging level for VoiceBridge Server. 1-9</td></tr>
<tr><td><b>voicebridge.sip.log.level</b></td><td>1</td><td>Logging level for SIP Server. 1-9</td></tr>
</table>
<p/>
</li>
</ul>


</body>
</html>
